os: linux
language: java
jdk:
  - oraclejdk14
env:
  matrix:
    - DISPLAY=:99.0
  global:
    #GITHUB:TOKEN
    - secure: FInUWB4nX0Za1pujizJOq5PBDUY8EnWwsFRxlt6htRRQLob2QCJyWJq2ENYbhkKQTYfOnGJxwRDzx2iaXyjKNE31Rr0cAYsjDOYgDX8LDMZ9R87sfT0GOmg1oAk02V7xlv84h6VWbFuX5sS0G4eZ4/Wm8kivyRkylU540kbRa1wDHQmvHR8pT9itkFrap36BlOrt5Hy7SmZ7mgzCoF1WPb97cD3yTm1AExBRgw+aDHiGO9e16j1lnuDSfHon4JefrQ9+//cthdSu+yQf/TtsnIv7gM1PQwxL78jAwjkrgbMg5hPY1DN6a5CsQAT06/IptnhvPDcf5BhE4PvUKjW0OuAvjskB/M3Em9npdyEZw6UGsHo6WIAS2tpkJNcGxdFhDgFS0rDzqDNlx21PETnr7r/IF75Ovh4iJGxn62ETh8qkPjXMODPny39KxDqMa++jUy1SonSwRfGvdeHmTXgI2tsOTxu1Vn4sqpvhoN0YPvVGsTvLEJ0CNAPaBNFdTcCo/HShRUazLKEo6XG8mx3WQPpLPel1bxSRFDVsU72z05fZH9KGlU5DmZmBztX70wBGKp8AmQqwKStheP6F+NV4vMZgrqTXaADwtiEk03RQjtCMb4bho5bR0cNTLpw1P4oXUaTr8SYaysS7LZr59wTQzPnuED94PpQNzeAC2hmZ/94=
#LINUX VERSION
dist: bionic
#GUI & VIRTUAL BROWSER
services:
  - xvfb
notifications:
  slack:
    rooms:
      - secure: E+UlNohgriwhUd5FlWkdH04YqNMdK2R3f2gjqLO9diKpgJr5i3ITIhm18i4jJC4dcE95mvNGYroznb1G/sLBiEAPOe2JT4lToKjWEB+Iup+juqskDnn7E0RVbc73WrYhgFSnMMxAXmzHWJCpH4otW28gTC431m3yswwQeb30A+u1dmmsuHm8jK4vwjYs+aBb55OJj48ReChvpoM6mrF81u+kB+/KFKdRJ+6iMC9oGv1ogE3ejrCLcf3CoqEW2eDGKRG+luwiGgA1+UwPKuBvtg2gHyuXsZ0Ew4IMU7YIElc3tAAbrPSbH60im3GB8YhHAinl2aJXsmBrEWTDRG3tzu42RhkJ3dNSaxsYweL9/deX76YXo9OgdRf2a2L9SV00T5m1PbaxvDxmPfh7qa3JYTjYTUMQOoVTdwKyXOHCQaXxw2oWooTaUxkBeQY4eME+eCefOzkfBiLde8HFgUYoAzZDg0GiRHFx525qfeS9UgAHKIq2aHLzxwbL1P+d/rzcpSAfDFGl+vD+veGCgFW4Jtqn66a1BFQgzTwpzgpxV9+LTsAIkZ6Xzq+XSxwJprZdkolfug2cNM8dLlbvzGz+I4Ptt78wMVaGMxkWi/E7EshpbLCE0gSxXUDOAVT5yF340sfJVcGFqnAD12NekW19KL4IrgelxruS4i5inuuIm5Q=
    on_success: always
    on_failure: always
    template:
      - "Repository `%{repository_slug}` deploy has *%{result}* - build number (<%{build_url}|#%{build_number}>)."
      - 'Author: *%{author}*, for commit (<%{compare_url}|%{commit}>) on branch `%{branch}` with message `%{commit_message}`.'
      - 'Execution time: *%{duration}*.'
      - 'Output message: *%{message}*'
  email:
    on_success: never
    on_failure: always
addons:
  chrome: stable
#DOWNLOAD AND INSTALL ALL REQUIRED DRIVERS
install:
  - wget -N http://chromedriver.storage.googleapis.com/81.0.4044.138/chromedriver_linux64.zip -P ~/
  - unzip ~/chromedriver_linux64.zip -d ~/
  - rm ~/chromedriver_linux64.zip
  - npm install -g allure-commandline --save-dev
before_script:
  - echo ========================================================================
  - echo =========================BUILD EXECUTION STARTED========================
  - echo ========================================================================
#RUN GRADLE
script:
  - ./gradlew test -Dtravis.buildNumber=$TRAVIS_BUILD_NUMBER -Dtravis.buildURL=$TRAVIS_BUILD_WEB_URL -Dtravis.branch=$TRAVIS_BRANCH -Dtravis.osName=$TRAVIS_OS_NAME -Dtravis.jdkVersion=$TRAVIS_JDK_VERSION
  #THIS COMMAND WOULD RUN TESTS ON BROWSERSTACK
  #- ./gradlew test -Dselenium.host=browserstack -Dselenium.hostURL=https://$BROWSERSTACK_USER_NAME:$ACCESS_TOKEN@hub-cloud.browserstack.com/wd/hub -Dbrowser=chrome
after_script:
  - echo ========================================================================
  - echo ========================BUILD EXECUTION FINISHED========================
  - echo ========================================================================
  - chmod 777 .travis/deploy.sh
  - echo ========================================================================
  - echo =========================UPLOADING TEST REPORTS=========================
  - echo ========================================================================
  - .travis/deploy.sh
  - echo ========================================================================
  - echo ===============================DONE 100%================================
  - echo ========================================================================